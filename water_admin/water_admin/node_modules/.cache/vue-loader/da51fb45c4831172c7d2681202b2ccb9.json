{"remainingRequest":"F:\\waterManager\\water_admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\waterManager\\water_admin\\src\\components\\page\\speed.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\waterManager\\water_admin\\src\\components\\page\\speed.vue","mtime":1650959836832},{"path":"F:\\waterManager\\water_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\waterManager\\water_admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\waterManager\\water_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\waterManager\\water_admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2hhcnRJbnN0YW5jZTogbnVsbCwKICAgICAgLy8g6L+U5Zue5pyN5Yqh5Zmo55qE5pWw5o2uCiAgICAgIGFsbERhdGE6IG51bGwsCiAgICAgIGN1cnJlbnRQYWdlOiAxLCAvL+W9k+WJjemhteaVsAogICAgICB0b3RhbFBhZ2U6IDAsIC8v5oC76aG15pWwCiAgICAgIHRpbWVySWQ6IG51bGwsIC8vIOWumuaXtuWZqOagh+ivhiwKICAgICAgc2hvd0Nob2ljZTogZmFsc2UsIC8v5piv5ZCm5pi+56S65Y+v6YCJ6aG5CiAgICAgIHR5cGU6ICdsaW5lJywKICAgICAgdGl0bGVGb250U2l6ZTogbnVsbCwgLy/mjIfmmI7moIfpopjlrZfkvZPlpKflsI8sCiAgICAgIHlEYXRhOiBudWxsLAogICAgICB4RGF0YTogbnVsbAogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIC8vIOWGjee7hOS7tuWIm+W7uuWujOaIkOaXtuWIm+W7uuWbnuiwg+WHveaVsAogICAgdGhpcy4kc29ja2V0LnJlZ2lzdGVyQ2FsbEJhY2soInNwZWVkIix0aGlzLmdldERhdGEpCiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5pbml0Q2hhcnQoKQogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuc2NyZWVuQWRhcHRlcikKICAgIHRoaXMuc2NyZWVuQWRhcHRlcigpCiAgfSwKICBkZXN0cm95ZWQoKSB7CiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5zY3JlZW5BZGFwdGVyKQogICAgLy8g6ZSA5q+B5pe25Y+W5raI5Zue6LCD5Ye95pWwCiAgICB0aGlzLiRzb2NrZXQudW5SZWdpc3RlckNhbGxCYWNrKHRoaXMuZ2V0RGF0YSkKICB9LAogIGNvbXB1dGVkOiB7CiAgICAvLyDorr7nva7nu5nmoIfpopjnmoTmoLflvI8KICAgIGNvbVN0eWxlKCkgewogICAgICByZXR1cm4gewogICAgICAgIGZvbnRTaXplOiB0aGlzLnRpdGxlRm9udFNpemUgKyAncHgnCiAgICAgIH0KCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDliJ3lp4vljJZlY2hhcnRJbnN0YW5jZeWvueixoQogICAgaW5pdENoYXJ0KCkgewogICAgICB0aGlzLmNoYXJ0SW5zdGFuY2UgPSB0aGlzLiRlY2hhcnRzLmluaXQodGhpcy4kcmVmcy53YXRlclNwZWVkLCAnY2hhbGsnKQogICAgICBjb25zdCBpbml0T3B0aW9uID0gewogICAgICAgIC8vIOiuvue9ruebtOaOpeWdkOagh+ezu+WdkOagh+i9tOWkp+WGmQogICAgICAgIGdyaWQ6IHsKICAgICAgICAgIGxlZnQ6ICczJScsCiAgICAgICAgICB0b3A6ICczNSUnLAogICAgICAgICAgcmlnaHQ6ICc0JScsCiAgICAgICAgICBib3R0b206ICcxJScsCiAgICAgICAgICBjb250YWluTGFiZWw6IHRydWUKICAgICAgICB9LAogICAgICAgIHhBeGlzOiB7CiAgICAgICAgICAvLyDlj5bmtojpl7TpmpkKICAgICAgICAgIHR5cGU6ICdjYXRlZ29yeScsCiAgICAgICAgICAvLyBib3VuZGFyeUdhcDogZmFsc2UKICAgICAgICB9LAogICAgICAgIHlBeGlzOiB7CgogICAgICAgIH0sCiAgICAgICAgdG9vbHRpcDogewogICAgICAgICAgdHJpZ2dlcjogJ2F4aXMnCiAgICAgICAgfSwKCiAgICAgIH0KCiAgICAgIHRoaXMuY2hhcnRJbnN0YW5jZS5zZXRPcHRpb24oaW5pdE9wdGlvbikKICAgIH0sCiAgICAvLyDojrflj5bmnI3liqHlmajmlbDmja4KICAgIGdldERhdGEocmV0KSB7CiAgICAgIHRoaXMuYWxsRGF0YSA9IEpTT04ucGFyc2UocmV0KQogICAgICB0aGlzLnVwZGF0ZUNoYXJ0KCkKICAgIH0sCiAgICAvLyDmm7TmlrDlm77ooagKICAgIHVwZGF0ZUNoYXJ0KCkgewogICAgICB0aGlzLnhEYXRhID0gdGhpcy5hbGxEYXRhLm1lYXN1cmVUaW1lLm1hcChpdGVtID0+IHsKICAgICAgICByZXR1cm4gaXRlbS5zcGxpdCgiICIpWzFdCiAgICAgIH0pCiAgICAgIHRoaXMueURhdGEgPSB0aGlzLmFsbERhdGEud2F0ZXJTcGVlZC5tYXAoaXRlbSA9PnsKICAgICAgICByZXR1cm4gaXRlbQogICAgICB9KQogICAgICAvKuaVsOe7hOaOkuW6jyovCiAgICAgIHRoaXMueERhdGEuc29ydCgpOwogICAgICBjb25zb2xlLmxvZyh0aGlzLnhEYXRhKQoKICAgICAgY29uc3Qgb3B0aW9uID0gewogICAgICAgIHhBeGlzOiB7CiAgICAgICAgICB0eXBlOiAnY2F0ZWdvcnknLAogICAgICAgICAgZGF0YTogdGhpcy54RGF0YSwKICAgICAgICAgIGF4aXNMYWJlbDogewogICAgICAgICAgICBpbnRlcnZhbDogMCwKICAgICAgICAgICAgZm9udFNpemU6JzEwJwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgeUF4aXM6IHsKICAgICAgICAgIHR5cGU6ICd2YWx1ZScsCiAgICAgICAgICBhcmVhU3R5bGU6IHt9CiAgICAgICAgfSwKICAgICAgICBzZXJpZXM6IFt7CiAgICAgICAgICB0eXBlOiB0aGlzLnR5cGUsCiAgICAgICAgICBkYXRhOiB0aGlzLnlEYXRhLAogICAgICAgICAgc21vb3RoOiB0cnVlLAogICAgICAgICAgc2hvd1N5bWJvbDogdHJ1ZSwKICAgICAgICAgIHN5bWJvbDogJ2NpcmNsZScsIC8v6K6+5a6a5Li65a6e5b+D54K5CiAgICAgICAgICBzeW1ib2xTaXplOiA1LCAvL+iuvuWumuWunuW/g+eCueeahOWkp+WwjwogICAgICAgICAgbWFya1BvaW50OiB7IC8v5pi+56S65LiA5a6a5Yy65Z+f5YaF55qE5pyA5aSn5YC85ZKM5pyA5bCP5YC8CiAgICAgICAgICAgIGRhdGE6IFt7CiAgICAgICAgICAgICAgICB0eXBlOiAnbWF4JywKICAgICAgICAgICAgICAgIG5hbWU6ICfmnIDlpKflgLwnCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0eXBlOiAnbWluJywKICAgICAgICAgICAgICAgIG5hbWU6ICfmnIDlsI/lgLwnCiAgICAgICAgICAgICAgfQogICAgICAgICAgICBdCiAgICAgICAgICB9LAogICAgICAgICAgYXJlYVN0eWxlOiB7CiAgICAgICAgICAgIC8vIOS7juS4iuW+gOS4i+eahOa4kOWPmOminOiJsgogICAgICAgICAgICBjb2xvcjogbmV3IHRoaXMuJGVjaGFydHMuZ3JhcGhpYy5MaW5lYXJHcmFkaWVudCgwLCAwLCAwLCAxLCBbewogICAgICAgICAgICAgICAgb2Zmc2V0OiAwLAogICAgICAgICAgICAgICAgY29sb3I6ICcjMDBFMkZGJwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgb2Zmc2V0OiAxLAogICAgICAgICAgICAgICAgY29sb3I6ICcjMDA2M0JGJwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgXSkKICAgICAgICAgIH0sCgogICAgICAgIH1dLAogICAgICB9CiAgICAgIHRoaXMuY2hhcnRJbnN0YW5jZS5zZXRPcHRpb24ob3B0aW9uKQogICAgfSwKCiAgICAvLyDlsY/luZXlpKflsI/pgILphY0g5Zu+5qCH6Ieq6YCC5bqUCiAgICBzY3JlZW5BZGFwdGVyKCkgewogICAgICAvLyDlvpfliLDlm77moIflrrnlmajlrr3luqYt44CL6I635Y+W5a2X5L2T5aSn5bCPCiAgICAgIHRoaXMudGl0bGVGb250U2l6ZSA9ICh0aGlzLiRyZWZzLndhdGVyU3BlZWQub2Zmc2V0V2lkdGggLyAxMDApICogMy42CiAgICAgIGNvbnN0IGFkYXB0ZXJPcHRpb24gPSB7CiAgICAgICAgbGVnZW5kOiB7CiAgICAgICAgICBpdGVtV2lkdGg6IHRoaXMudGl0bGVGb250U2l6ZSwKICAgICAgICAgIGl0ZW1IZWlnaHQ6IHRoaXMudGl0bGVGb250U2l6ZSwKICAgICAgICAgIGl0ZW1HYXA6IHRoaXMudGl0bGVGb250U2l6ZSwKICAgICAgICAgIHRleHRTdHlsZTogewogICAgICAgICAgICBmb250U2l6ZTogdGhpcy50aXRsZUZvbnRTaXplIC8gMgogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLmNoYXJ0SW5zdGFuY2Uuc2V0T3B0aW9uKGFkYXB0ZXJPcHRpb24pCiAgICAgIHRoaXMuY2hhcnRJbnN0YW5jZS5yZXNpemUoKQogICAgfSwKCiAgfQp9Cg=="},{"version":3,"sources":["speed.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"speed.vue","sourceRoot":"src/components/page","sourcesContent":["<!--\r\n * @Author: Tashany\r\n * @Date: 2022-04-06 21:54:21\r\n * @LastEditors: Tashany\r\n * @LastEditTime: 2022-04-26 15:57:16\r\n * @Description: 水位变化速度\r\n * @FilePath: \\water_admin\\src\\components\\page\\speed.vue\r\n-->\r\n<template>\r\n\r\n  <div class=\"com-container\">\r\n    <div class=\"title\" :style=\"comStyle\">\r\n      <span>▎水位速度变化</span>\r\n      <span class=\"iconfont title-icon\" @click=\"showChoice = !showChoice\" :style=\"comStyle\">&#xe6eb;</span>\r\n      <div class=\"select-con\" v-show=\"showChoice\">\r\n        <div class=\"select-item\" @click=\"type='bar'\">我是标题选择一</div>\r\n        <div class=\"select-item\">我是标题选择二</div>\r\n        <div class=\"select-item\">我是标题选择三</div>\r\n      </div>\r\n    </div>\r\n    <div class=\"com-chart\" ref=\"waterSpeed\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    data() {\r\n      return {\r\n        chartInstance: null,\r\n        // 返回服务器的数据\r\n        allData: null,\r\n        currentPage: 1, //当前页数\r\n        totalPage: 0, //总页数\r\n        timerId: null, // 定时器标识,\r\n        showChoice: false, //是否显示可选项\r\n        type: 'line',\r\n        titleFontSize: null, //指明标题字体大小,\r\n        yData: null,\r\n        xData: null\r\n      }\r\n    },\r\n    created() {\r\n      // 再组件创建完成时创建回调函数\r\n      this.$socket.registerCallBack(\"speed\",this.getData)\r\n    },\r\n    mounted() {\r\n      this.initChart()\r\n      window.addEventListener('resize', this.screenAdapter)\r\n      this.screenAdapter()\r\n    },\r\n    destroyed() {\r\n      window.removeEventListener('resize', this.screenAdapter)\r\n      // 销毁时取消回调函数\r\n      this.$socket.unRegisterCallBack(this.getData)\r\n    },\r\n    computed: {\r\n      // 设置给标题的样式\r\n      comStyle() {\r\n        return {\r\n          fontSize: this.titleFontSize + 'px'\r\n        }\r\n\r\n      }\r\n    },\r\n    methods: {\r\n      // 初始化echartInstance对象\r\n      initChart() {\r\n        this.chartInstance = this.$echarts.init(this.$refs.waterSpeed, 'chalk')\r\n        const initOption = {\r\n          // 设置直接坐标系坐标轴大写\r\n          grid: {\r\n            left: '3%',\r\n            top: '35%',\r\n            right: '4%',\r\n            bottom: '1%',\r\n            containLabel: true\r\n          },\r\n          xAxis: {\r\n            // 取消间隙\r\n            type: 'category',\r\n            // boundaryGap: false\r\n          },\r\n          yAxis: {\r\n\r\n          },\r\n          tooltip: {\r\n            trigger: 'axis'\r\n          },\r\n\r\n        }\r\n\r\n        this.chartInstance.setOption(initOption)\r\n      },\r\n      // 获取服务器数据\r\n      getData(ret) {\r\n        this.allData = JSON.parse(ret)\r\n        this.updateChart()\r\n      },\r\n      // 更新图表\r\n      updateChart() {\r\n        this.xData = this.allData.measureTime.map(item => {\r\n          return item.split(\" \")[1]\r\n        })\r\n        this.yData = this.allData.waterSpeed.map(item =>{\r\n          return item\r\n        })\r\n        /*数组排序*/\r\n        this.xData.sort();\r\n        console.log(this.xData)\r\n\r\n        const option = {\r\n          xAxis: {\r\n            type: 'category',\r\n            data: this.xData,\r\n            axisLabel: {\r\n              interval: 0,\r\n              fontSize:'10'\r\n            }\r\n          },\r\n          yAxis: {\r\n            type: 'value',\r\n            areaStyle: {}\r\n          },\r\n          series: [{\r\n            type: this.type,\r\n            data: this.yData,\r\n            smooth: true,\r\n            showSymbol: true,\r\n            symbol: 'circle', //设定为实心点\r\n            symbolSize: 5, //设定实心点的大小\r\n            markPoint: { //显示一定区域内的最大值和最小值\r\n              data: [{\r\n                  type: 'max',\r\n                  name: '最大值'\r\n                },\r\n                {\r\n                  type: 'min',\r\n                  name: '最小值'\r\n                }\r\n              ]\r\n            },\r\n            areaStyle: {\r\n              // 从上往下的渐变颜色\r\n              color: new this.$echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n                  offset: 0,\r\n                  color: '#00E2FF'\r\n                },\r\n                {\r\n                  offset: 1,\r\n                  color: '#0063BF'\r\n                }\r\n              ])\r\n            },\r\n\r\n          }],\r\n        }\r\n        this.chartInstance.setOption(option)\r\n      },\r\n\r\n      // 屏幕大小适配 图标自适应\r\n      screenAdapter() {\r\n        // 得到图标容器宽度-》获取字体大小\r\n        this.titleFontSize = (this.$refs.waterSpeed.offsetWidth / 100) * 3.6\r\n        const adapterOption = {\r\n          legend: {\r\n            itemWidth: this.titleFontSize,\r\n            itemHeight: this.titleFontSize,\r\n            itemGap: this.titleFontSize,\r\n            textStyle: {\r\n              fontSize: this.titleFontSize / 2\r\n            }\r\n          }\r\n        }\r\n        this.chartInstance.setOption(adapterOption)\r\n        this.chartInstance.resize()\r\n      },\r\n\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .title {\r\n    position: absolute;\r\n    left: 20px;\r\n    top: 20px;\r\n    z-index: 10;\r\n    color: white;\r\n\r\n    .title-icon {\r\n      margin-left: 10px;\r\n      cursor: pointer;\r\n    }\r\n  }\r\n</style>"]}]}