{"remainingRequest":"F:\\waterManager\\water_admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\waterManager\\water_admin\\src\\components\\login.vue?vue&type=style&index=0&id=10d9df09&scoped=true&lang=css&","dependencies":[{"path":"F:\\waterManager\\water_admin\\src\\components\\login.vue","mtime":1648819323658},{"path":"F:\\waterManager\\water_admin\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\waterManager\\water_admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"F:\\waterManager\\water_admin\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"F:\\waterManager\\water_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\waterManager\\water_admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCkBpbXBvcnQgdXJsKCIuLi9DU1Mvc3R5bGUuY3NzIik7Cg=="},{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6PA","file":"login.vue","sourceRoot":"src/components","sourcesContent":["<!--\r\n * @Author: Tashany\r\n * @Date: 2022-03-16 15:17:38\r\n * @LastEditors: Tashany\r\n * @LastEditTime: 2022-04-01 21:22:03\r\n * @Description: file content\r\n * @FilePath: \\water_admin\\src\\components\\login.vue\r\n-->\r\n<template>\r\n\t<div>\r\n\t\t<!-- 登录 -->\r\n\t\t<section class=\"w3l-forms-23\">\r\n\t\t\t<div class=\"forms23-block-hny\">\r\n\t\t\t\t<div class=\"wrapper\">\r\n\t\t\t\t\t<h1> Login Form</h1>\r\n\t\t\t\t\t<div class=\"d-grid forms23-grids\">\r\n\t\t\t\t\t\t<div class=\"form23\">\r\n\t\t\t\t\t\t\t<div class=\"main-bg\">\r\n\t\t\t\t\t\t\t\t<h6 class=\"sec-one\">John Doe</h6>\r\n\t\t\t\t\t\t\t\t<div class=\"speci-login first-look\">\r\n\t\t\t\t\t\t\t\t\t<img src=\"../assets/user.png\" alt=\"\" class=\"img-responsive\">\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"bottom-content\">\r\n\t\t\t\t\t\t\t\t<form name=\"login\">\r\n\t\t\t\t\t\t\t\t\t<input type=\"text\" v-model=\"magName\" id=\"magName\" class=\"input-form\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Your UserName\" required=\"required\" />\r\n\t\t\t\t\t\t\t\t\t<input type=\"password\" id=\"magPassword\" class=\"input-form\" v-model=\"magPassward\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Your Password\" required=\"required\" />\r\n\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t\t<button type=\"submit\" class=\"loginhny-btn btn\" @click=\"getLogin()\">Login</button>\r\n\t\t\t\t\t\t\t\t<p>Not a member yet? <a href=\"#\" @click=\"getRegister\">Register</a></p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"w3l-copy-right text-center\">\r\n\t\t\t\t\t\t<p>© 20202 Tashany Login Form. All rights CUIT | TASHANY Design by</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</section>\r\n\t\t<!-- 注册对话框 -->\r\n\t\t<el-dialog title=\"注册\" :visible.sync=\"dialogFormVisible\" width=\"30%\">\r\n\t\t\t<el-form :model=\"ruleForm\" status-icon :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\"\r\n\t\t\t\tclass=\"demo-ruleForm\">\r\n\t\t\t\t<el-form-item label=\"用户名\" prop=\"magName\">\r\n\t\t\t\t\t<el-input type=\"text\" v-model=\"ruleForm.magName\" autocomplete=\"off\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"密码\" prop=\"magPassward\">\r\n\t\t\t\t\t<el-input type=\"password\" v-model=\"ruleForm.magPassward\" autocomplete=\"off\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"确认密码\" prop=\"checkPass\">\r\n\t\t\t\t\t<el-input type=\"password\" v-model=\"ruleForm.checkPass\" autocomplete=\"off\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"邮箱\" prop=\"magEmail\">\r\n\t\t\t\t\t<el-input type=\"email\" v-model=\"ruleForm.magEmail\" autocomplete=\"off\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"电话号码\" prop=\"magNum\">\r\n\t\t\t\t\t<el-input type=\"text\" v-model.number=\"ruleForm.magNum\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"权限等级\">\r\n\t\t\t\t\t<el-radio-group v-model=\"ruleForm.magRoot\" @change=\"test\">\r\n\t\t\t\t\t\t<el-radio v-model=\"radio\" label=\"1\">一级</el-radio>\r\n\t\t\t\t\t\t<el-radio v-model=\"radio\" label=\"2\">二级</el-radio>\r\n\t\t\t\t\t</el-radio-group>\r\n\t\t\t\t</el-form-item>\r\n\r\n\t\t\t\t<!-- <div slot=\"footer\" class=\"dialog-footer\"> -->\r\n\t\t\t\t<el-button @click=\"resetForm('ruleForm')\">重 置</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"submitForm('ruleForm')\">提 交</el-button>\r\n\t\t\t\t<!-- </div> -->\r\n\t\t\t</el-form>\r\n\t\t</el-dialog>\r\n\t</div>\r\n</template>\r\n<script>\r\n\timport {\r\n\t\treqgetLogin,\r\n\t\treqgetRegister\r\n\t} from '@/api/login.js'\r\n\timport {\r\n\t\tsetCookie,\r\n\t\tgetCookie,\r\n\t\tdelCookie\r\n\t} from '@/tools/cookie.js';\r\n\timport router from '../router';\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\t// 验证手机号\r\n\t\t\tvar checkNum = (rule, value, callback) => {\r\n\t\t\t\tvar reg = /^[1]([3-9])[0-9]{9}$/\r\n\t\t\t\tif (!reg.test(value)) {\r\n\t\t\t\t\treturn callback(new Error('请输入正确手机号'));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// 验证用户名\r\n\t\t\tvar checkName = (rule, value, callback) => {\r\n\t\t\t\tvar reg =  /^([\\u4e00-\\u9fa5]{2,4})|([A-Za-z0-9_]{4,16})|([a-zA-Z0-9_\\u4e00-\\u9fa5]{3,16})$/;\r\n\t\t\t\tconsole.log(reg.test(value))\r\n\t\t\t\tif (!reg.test(value)) {\r\n\t\t\t\t\treturn callback(new Error('管理员名要求4-16位字母,数字,汉字,下划线'));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\t// 验证密码\r\n\t\t\tvar validatePass = (rule, value, callback) => {\r\n\t\t\t\tvar reg = /^\\w{6,16}$/\r\n\t\t\t\tif (!reg.test(value)) {\r\n\t\t\t\t\tcallback(new Error('请输入6-16位密码'));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (this.ruleForm.checkPass !== '') {\r\n\t\t\t\t\t\tthis.$refs.ruleForm.validateField('checkPass');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\t// 再次输入密码\r\n\t\t\tvar validatePass2 = (rule, value, callback) => {\r\n\t\t\t\tif (value === '') {\r\n\t\t\t\t\tcallback(new Error('请再次输入密码'));\r\n\t\t\t\t} else if (value !== this.ruleForm.magPassward) {\r\n\t\t\t\t\tcallback(new Error('两次输入密码不一致!'));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\treturn {\r\n\t\t\t\tmagName: '',\r\n\t\t\t\tmagPassward: '',\r\n\t\t\t\t// 单选默认\r\n\t\t\t\tradio: 1,\r\n\t\t\t\t// 对话框\r\n\t\t\t\tdialogFormVisible: false,\r\n\t\t\t\t//表单内容\r\n\t\t\t\truleForm: {\r\n\t\t\t\t\tmagPassward: '',\r\n\t\t\t\t\tcheckPass: '',\r\n\t\t\t\t\tmagName: '',\r\n\t\t\t\t\tmagEmail: '',\r\n\t\t\t\t\tmagNum: '',\r\n\t\t\t\t\tmagRoot: ''\r\n\t\t\t\t},\r\n\t\t\t\t// 校验规则\r\n\t\t\t\trules: {\r\n\t\t\t\t\tmagPassward: [{\r\n\t\t\t\t\t\tvalidator: validatePass,\r\n\t\t\t\t\t\ttrigger: ['blur']\r\n\t\t\t\t\t}],\r\n\t\t\t\t\tcheckPass: [{\r\n\t\t\t\t\t\tvalidator: validatePass2,\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}],\r\n\t\t\t\t\tmagName: [{\r\n\t\t\t\t\t\tvalidator: checkName,\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}],\r\n\t\t\t\t\tmagEmail: [{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tmessage: '请输入邮箱地址',\r\n\t\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttype: 'email',\r\n\t\t\t\t\t\t\tmessage: '请输入正确的邮箱地址',\r\n\t\t\t\t\t\t\ttrigger: ['blur', 'change']\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\tmagNum: [{\r\n\t\t\t\t\t\tvalidator: checkNum,\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}],\r\n\t\t\t\t\tmagRoot: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: '请选择权限等级',\r\n\t\t\t\t\t\ttrigger: 'change'\r\n\t\t\t\t\t}]\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\ttest() {\r\n\t\t\t\tconsole.log(this.ruleForm.root)\r\n\t\t\t},\r\n\t\t\t//登录\r\n\t\t\tasync getLogin() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst res = await reqgetLogin(this.magName, this.magPassward)\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t// 将头像和名字传到cookie\r\n\t\t\t\t\tsetCookie('magImg', res.data.magImg)\r\n\t\t\t\t\tsetCookie('magName', res.data.magName)\r\n\t\t\t\t\tlocalStorage.setItem('magImg', res.data.magImg);\r\n\t\t\t\t\tlocalStorage.setItem('magName', res.data.magName);\r\n\t\t\t\t\tlocalStorage.setItem('token', res.data.token);\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tthis.$router.push(\"/home\")\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t},\r\n\t\t\t//注册\r\n\t\t\tasync Register() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst res = await reqgetRegister(this.ruleForm)\r\n\t\t\t\t\treturn res;\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t\ta\r\n\t\t\t},\r\n\t\t\t// 表单提交注册\r\n\t\t\tsubmitForm(formName) {\r\n\t\t\t\tthis.$refs[formName].validate((valid) => {\r\n\t\t\t\t\tconsole.log(formName)\r\n\t\t\t\t\tif (valid) {\r\n\t\t\t\t\t\tvar res = this.Register().then((res) => {\r\n\t\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t\tif (res.code === '200') {\r\n\t\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\t\tmessage: res.msg,\r\n\t\t\t\t\t\t\t\t\ttype: 'success'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tthis.$router.push(\"/\")\r\n\t\t\t\t\t\t\t} else if (res.code === '501') {\r\n\t\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\t\tmessage: res.msg,\r\n\t\t\t\t\t\t\t\t\ttype: 'error'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\t\tmessage: res.msg,\r\n\t\t\t\t\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log('error submit!!');\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tthis.dialogFormVisible = false;\r\n\t\t\t},\r\n\t\t\t// 重置表单\r\n\t\t\tresetForm(formName) {\r\n\t\t\t\tthis.$refs[formName].resetFields();\r\n\t\t\t},\r\n\t\t\tgetRegister() {\r\n\t\t\t\tthis.dialogFormVisible = true\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n<style scoped>\r\n\t@import url(\"../CSS/style.css\");\r\n</style>"]}]}