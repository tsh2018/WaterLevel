{"remainingRequest":"F:\\waterManager\\water_admin\\node_modules\\babel-loader\\lib\\index.js!F:\\waterManager\\water_admin\\src\\tools\\SocketService.js","dependencies":[{"path":"F:\\waterManager\\water_admin\\src\\tools\\SocketService.js","mtime":1652678780983},{"path":"F:\\waterManager\\water_admin\\babel.config.js","mtime":1646632679840},{"path":"F:\\waterManager\\water_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\waterManager\\water_admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJGOi93YXRlck1hbmFnZXIvd2F0ZXJfYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrLmpzIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJGOi93YXRlck1hbmFnZXIvd2F0ZXJfYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzLmpzIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJGOi93YXRlck1hbmFnZXIvd2F0ZXJfYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5LmpzIjsKCi8qDQogKiBAQXV0aG9yOiBUYXNoYW55DQogKiBARGF0ZTogMjAyMi0wNC0yNSAxNTo1Njo1MA0KICogQExhc3RFZGl0b3JzOiBUYXNoYW55DQogKiBATGFzdEVkaXRUaW1lOiAyMDIyLTA1LTEwIDE3OjUzOjEwDQogKiBARGVzY3JpcHRpb246IGZpbGUgY29udGVudA0KICogQEZpbGVQYXRoOiBcd2F0ZXJfYWRtaW5cc3JjXHRvb2xzXFNvY2tldFNlcnZpY2UuanMNCiAqLwp2YXIgU29ja2V0U2VydmljZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gU29ja2V0U2VydmljZSgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTb2NrZXRTZXJ2aWNlKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIndzIiwgbnVsbCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJjYWxsQmFja01hcHBpbmciLCB7fSk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoU29ja2V0U2VydmljZSwgW3sKICAgIGtleTogImNvbm5lY3QiLAogICAgdmFsdWU6IC8v6L+e5o6l5pyN5Yqh5Zmo55qE5pa55rOVCiAgICBmdW5jdGlvbiBjb25uZWN0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy/ov57mjqXmnI3liqHlmagKICAgICAgaWYgKCF3aW5kb3cuV2ViU29ja2V0KSB7CiAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKCLmgqjnmoTmnI3liqHlmajkuI3mlK/mjIF3ZWJzb2NrZXQiKTsKICAgICAgfQoKICAgICAgdGhpcy53cyA9IG5ldyBXZWJTb2NrZXQoJ3dzOi8vbG9jYWxob3N0OjgwODEvd3MnKTsKCiAgICAgIHRoaXMud3Mub25vcGVuID0gZnVuY3Rpb24gKCkgewogICAgICAgIC8v6L+e5o6l5oiQ5Yqf5Zue6LCD5pa55rOVCiAgICAgICAgY29uc29sZS5sb2coIui/nuaOpeaIkOWKny4uLi4iKTsKICAgICAgfTsKCiAgICAgIHRoaXMud3Mub25jbG9zZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBjb25zb2xlLmxvZygi6L+e5o6l5aSx6LSlLi4uLi4iKTsKICAgICAgfTsKCiAgICAgIHRoaXMud3Mub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICBjb25zb2xlLmxvZygn5o6l5pS25Yiw5p2l6Ieq5pyN5Yqh5Zmo55qE5raI5oGvMTEx77yaJyk7CgogICAgICAgIF90aGlzLmNhbGxCYWNrTWFwcGluZ1sic3BlZWQiXS5jYWxsKF90aGlzLCBlLmRhdGEpOwoKICAgICAgICBfdGhpcy5jYWxsQmFja01hcHBpbmdbImFjY2VsZXJhdGlvbiJdLmNhbGwoX3RoaXMsIGUuZGF0YSk7CgogICAgICAgIF90aGlzLmNhbGxCYWNrTWFwcGluZ1siYWxhcm1JbmZvIl0uY2FsbChfdGhpcywgZS5kYXRhKTsKCiAgICAgICAgX3RoaXMuY2FsbEJhY2tNYXBwaW5nWyJoZWlnaHQiXS5jYWxsKF90aGlzLCBlLmRhdGEpOwoKICAgICAgICBfdGhpcy5jYWxsQmFja01hcHBpbmdbImNvbnRyYXN0Il0uY2FsbChfdGhpcywgZS5kYXRhKTsKCiAgICAgICAgX3RoaXMuY2FsbEJhY2tNYXBwaW5nWyJkYXRhSW5mbyJdLmNhbGwoX3RoaXMsIGUuZGF0YSk7CgogICAgICAgIF90aGlzLmNhbGxCYWNrTWFwcGluZ1siYWxhcm1UaW1lIl0uY2FsbChfdGhpcywgZS5kYXRhKTsKCiAgICAgICAgX3RoaXMuY2FsbEJhY2tNYXBwaW5nWyJjb250cmFzdCJdLmNhbGwoX3RoaXMsIGUuZGF0YSk7CgogICAgICAgIF90aGlzLmNhbGxCYWNrTWFwcGluZ1sid2F0ZXJTcGVlZCJdLmNhbGwoX3RoaXMsIGUuZGF0YSk7CiAgICAgIH07CiAgICB9IC8vIOWbnuiwg+WHveaVsOeahOazqOWGjAoKICB9LCB7CiAgICBrZXk6ICJyZWdpc3RlckNhbGxCYWNrIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZWdpc3RlckNhbGxCYWNrKHNvY2tldFR5cGUsIGNhbGxCYWNrKSB7CiAgICAgIGNvbnNvbGUubG9nKCflm57osIPlh73mlbDnmoTms6jlhownLCBjYWxsQmFjayk7CiAgICAgIHRoaXMuY2FsbEJhY2tNYXBwaW5nW3NvY2tldFR5cGVdID0gY2FsbEJhY2s7CiAgICAgIGNvbnNvbGUubG9nKGNhbGxCYWNrKTsKICAgIH0gLy8g5Y+W5raI5p+Q5LiA5Liq5Zue6LCD5Ye95pWwCgogIH0sIHsKICAgIGtleTogInVuUmVnaXN0ZXJDYWxsQmFjayIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdW5SZWdpc3RlckNhbGxCYWNrKHNvY2tldFR5cGUpIHsKICAgICAgY29uc29sZS5sb2coJ+WPlua2iOafkOS4gOS4quWbnuiwg+WHveaVsCcsIHNvY2tldFR5cGUpOwogICAgICB0aGlzLmNhbGxCYWNrTWFwcGluZ1tzb2NrZXRUeXBlXSA9IG51bGw7CiAgICB9CiAgfV0sIFt7CiAgICBrZXk6ICJJbnN0YW5jZSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgaWYgKCF0aGlzLmluc3RhbmNlKSB7CiAgICAgICAgdGhpcy5pbnN0YW5jZSA9IG5ldyBTb2NrZXRTZXJ2aWNlKCk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlOwogICAgfSAvL+WSjOeahOacjeWKoeerr+i/nuaOpeeahHNvY2tldOWvueixoQoKICB9XSk7CgogIHJldHVybiBTb2NrZXRTZXJ2aWNlOwp9KCk7CgpfZGVmaW5lUHJvcGVydHkoU29ja2V0U2VydmljZSwgImluc3RhbmNlIiwgbnVsbCk7CgpleHBvcnQgeyBTb2NrZXRTZXJ2aWNlIGFzIGRlZmF1bHQgfTs="},{"version":3,"sources":["F:/waterManager/water_admin/src/tools/SocketService.js"],"names":["SocketService","window","WebSocket","console","log","ws","onopen","onclose","onmessage","e","callBackMapping","call","data","socketType","callBack","instance"],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACqBA,a;;;;gCAaZ,I;;6CAEa,E;;;;;WAElB;AACA,uBAAU;AAAA;;AACN;AACA,UAAI,CAACC,MAAM,CAACC,SAAZ,EAAuB;AACnB,eAAOC,OAAO,CAACC,GAAR,CAAY,mBAAZ,CAAP;AACH;;AACD,WAAKC,EAAL,GAAU,IAAIH,SAAJ,CAAc,wBAAd,CAAV;;AAEA,WAAKG,EAAL,CAAQC,MAAR,GAAiB,YAAK;AAAE;AACpBH,QAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACH,OAFD;;AAGA,WAAKC,EAAL,CAAQE,OAAR,GAAkB,YAAM;AACpBJ,QAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACH,OAFD;;AAGA,WAAKC,EAAL,CAAQG,SAAR,GAAoB,UAAAC,CAAC,EAAI;AACrBN,QAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;;AACA,QAAA,KAAI,CAACM,eAAL,CAAqB,OAArB,EAA8BC,IAA9B,CAAmC,KAAnC,EAAyCF,CAAC,CAACG,IAA3C;;AACA,QAAA,KAAI,CAACF,eAAL,CAAqB,cAArB,EAAqCC,IAArC,CAA0C,KAA1C,EAAgDF,CAAC,CAACG,IAAlD;;AACA,QAAA,KAAI,CAACF,eAAL,CAAqB,WAArB,EAAkCC,IAAlC,CAAuC,KAAvC,EAA6CF,CAAC,CAACG,IAA/C;;AACA,QAAA,KAAI,CAACF,eAAL,CAAqB,QAArB,EAA+BC,IAA/B,CAAoC,KAApC,EAA0CF,CAAC,CAACG,IAA5C;;AACA,QAAA,KAAI,CAACF,eAAL,CAAqB,UAArB,EAAiCC,IAAjC,CAAsC,KAAtC,EAA4CF,CAAC,CAACG,IAA9C;;AACA,QAAA,KAAI,CAACF,eAAL,CAAqB,UAArB,EAAiCC,IAAjC,CAAsC,KAAtC,EAA4CF,CAAC,CAACG,IAA9C;;AACA,QAAA,KAAI,CAACF,eAAL,CAAqB,WAArB,EAAkCC,IAAlC,CAAuC,KAAvC,EAA6CF,CAAC,CAACG,IAA/C;;AACA,QAAA,KAAI,CAACF,eAAL,CAAqB,UAArB,EAAiCC,IAAjC,CAAsC,KAAtC,EAA4CF,CAAC,CAACG,IAA9C;;AACA,QAAA,KAAI,CAACF,eAAL,CAAqB,YAArB,EAAmCC,IAAnC,CAAwC,KAAxC,EAA8CF,CAAC,CAACG,IAAhD;AACH,OAXD;AAYH,K,CAEA;;;;WACH,0BAAkBC,UAAlB,EAA6BC,QAA7B,EAAuC;AACrCX,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBU,QAAvB;AACA,WAAKJ,eAAL,CAAqBG,UAArB,IAAmCC,QAAnC;AACAX,MAAAA,OAAO,CAACC,GAAR,CAAYU,QAAZ;AACD,K,CACC;;;;WACF,4BAAmBD,UAAnB,EAA8B;AAC5BV,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBS,UAAzB;AACA,WAAKH,eAAL,CAAqBG,UAArB,IAAmC,IAAnC;AACD;;;SAlDC,eAAsB;AAClB,UAAI,CAAC,KAAKE,QAAV,EAAoB;AAChB,aAAKA,QAAL,GAAgB,IAAIf,aAAJ,EAAhB;AACH;;AACD,aAAO,KAAKe,QAAZ;AACH,K,CAED;;;;;;;gBAZiBf,a,cAIC,I;;SAJDA,a","sourcesContent":["/*\r\n * @Author: Tashany\r\n * @Date: 2022-04-25 15:56:50\r\n * @LastEditors: Tashany\r\n * @LastEditTime: 2022-05-10 17:53:10\r\n * @Description: file content\r\n * @FilePath: \\water_admin\\src\\tools\\SocketService.js\r\n */\r\nexport default class SocketService {\r\n    /**\r\n     * 单例\r\n     */\r\n    static instance = null;\r\n    static get Instance() {\r\n        if (!this.instance) {\r\n            this.instance = new SocketService()\r\n        }\r\n        return this.instance\r\n    }\r\n\r\n    //和的服务端连接的socket对象\r\n    ws = null\r\n    // 存储回调函数\r\n    callBackMapping = {}\r\n\r\n    //连接服务器的方法\r\n    connect() {\r\n        //连接服务器\r\n        if (!window.WebSocket) {\r\n            return console.log(\"您的服务器不支持websocket\")\r\n        }\r\n        this.ws = new WebSocket('ws://localhost:8081/ws')\r\n\r\n        this.ws.onopen = () =>{ //连接成功回调方法\r\n            console.log(\"连接成功....\")\r\n        };\r\n        this.ws.onclose = () => {\r\n            console.log(\"连接失败.....\") \r\n        }\r\n        this.ws.onmessage = e => {\r\n            console.log('接收到来自服务器的消息111：');\r\n            this.callBackMapping[\"speed\"].call(this, e.data)\r\n            this.callBackMapping[\"acceleration\"].call(this, e.data)\r\n            this.callBackMapping[\"alarmInfo\"].call(this, e.data)\r\n            this.callBackMapping[\"height\"].call(this, e.data)\r\n            this.callBackMapping[\"contrast\"].call(this, e.data)\r\n            this.callBackMapping[\"dataInfo\"].call(this, e.data)\r\n            this.callBackMapping[\"alarmTime\"].call(this, e.data)\r\n            this.callBackMapping[\"contrast\"].call(this, e.data)\r\n            this.callBackMapping[\"waterSpeed\"].call(this, e.data)\r\n        }   \r\n    }\r\n\r\n     // 回调函数的注册\r\n  registerCallBack (socketType,callBack) {\r\n    console.log('回调函数的注册', callBack)\r\n    this.callBackMapping[socketType] = callBack\r\n    console.log(callBack)\r\n  }\r\n    // 取消某一个回调函数\r\n  unRegisterCallBack(socketType){\r\n    console.log('取消某一个回调函数', socketType)\r\n    this.callBackMapping[socketType] = null\r\n  }\r\n}"]}]}